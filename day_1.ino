#include <Adafruit_NeoPixel.h> 

#define RGB_Control_PIN   14 
#define Matrix_Row        8
#define Matrix_Col        8
#define RGB_COUNT         64

#define AMBER 1
#define GREEN 0
#define RED 2


Adafruit_NeoPixel pixels(RGB_COUNT, RGB_Control_PIN, NEO_RGB + NEO_KHZ800); 

void Matrix_Init() {
  pixels.begin();
  // Keep brightness modest to avoid overheating the board.
  pixels.setBrightness(1);
  pixels.clear();
  pixels.show();
}

// Simple 3x5 digit glyphs (bits 0-2 used per row).
const byte DIGITS[10][5] = {
  {0b111, 0b101, 0b101, 0b101, 0b111}, // 0
  {0b010, 0b110, 0b010, 0b010, 0b111}, // 1
  {0b111, 0b001, 0b111, 0b100, 0b111}, // 2
  {0b111, 0b001, 0b111, 0b001, 0b111}, // 3
  {0b101, 0b101, 0b111, 0b001, 0b001}, // 4
  {0b111, 0b100, 0b111, 0b001, 0b111}, // 5
  {0b111, 0b100, 0b111, 0b101, 0b111}, // 6
  {0b111, 0b001, 0b001, 0b001, 0b001}, // 7
  {0b111, 0b101, 0b111, 0b101, 0b111}, // 8
  {0b111, 0b101, 0b111, 0b001, 0b111}  // 9
};

const int DIGIT_WIDTH = 3;
const int DIGIT_SPACING = 1;
const int DIGIT_STRIDE = DIGIT_WIDTH + DIGIT_SPACING;
const int SCROLL_DELAY_MS = 120;
const uint32_t STAR_COLOR = Adafruit_NeoPixel::Color(255, 255, 0); // yellow

uint16_t pixelIndex(int row, int col) {
  return row * Matrix_Col + col;
}

void displayStar(uint32_t color = STAR_COLOR) {
  const uint8_t coords[][2] = {
    {1, 3}, {1, 4},
    {2, 2}, {2, 3}, {2, 4}, {2, 5},
    {3, 1}, {3, 2}, {3, 3}, {3, 4}, {3, 5}, {3, 6},
    {4, 2}, {4, 3}, {4, 4}, {4, 5},
    {5, 3}, {5, 4}
  };

  pixels.clear();
  for (const auto &p : coords) {
    pixels.setPixelColor(pixelIndex(p[0], p[1]), color);
  }
  pixels.show();
}

void drawDigit(int digit, int offsetX, uint32_t color) {
  for (int row = 0; row < 5; row++) {
    byte pattern = DIGITS[digit][row];
    for (int col = 0; col < 3; col++) {
      bool on = pattern & (0b100 >> col);
      int x = offsetX + col;
      if (x >= 0 && x < Matrix_Col && row < Matrix_Row) {
        pixels.setPixelColor(pixelIndex(row, x), on ? color : 0);
      }
    }
  }
}

void drawSymbol(char c, int offsetX, uint32_t color) {
  if (c >= '0' && c <= '9') {
    drawDigit(c - '0', offsetX, color);
    return;
  }

  if (c == '-') {
    const byte minusGlyph[5] = {0b000, 0b000, 0b111, 0b000, 0b000};
    for (int row = 0; row < 5; row++) {
      byte pattern = minusGlyph[row];
      for (int col = 0; col < 3; col++) {
        bool on = pattern & (0b100 >> col);
        int x = offsetX + col;
        if (x >= 0 && x < Matrix_Col && row < Matrix_Row) {
          pixels.setPixelColor(pixelIndex(row, x), on ? color : 0);
        }
      }
    }
  }
}

void displayNumber(int value, int colorMode = 0) {
  uint32_t color;
  if (colorMode == 2) {
    color = pixels.Color(255, 0, 0);      // red
  } else if (colorMode == 0) {
    color = pixels.Color(0, 255, 0);      // green
  } else {
    color = pixels.Color(255, 200, 0);    // amber
  }

  String text = String(value);
  int totalWidth = text.length() * DIGIT_STRIDE - DIGIT_SPACING;
  if (totalWidth <= Matrix_Col) {
    int offset = (Matrix_Col - totalWidth) / 2; // center if it fits
    pixels.clear();
    for (int i = 0; i < text.length(); i++) {
      int digitX = offset + i * DIGIT_STRIDE;
      drawSymbol(text.charAt(i), digitX, color);
    }
    pixels.show();
    return;
  }

  for (int offset = Matrix_Col; offset >= -totalWidth; --offset) {
    pixels.clear();
    for (int i = 0; i < text.length(); i++) {
      int digitX = offset + i * DIGIT_STRIDE;
      drawSymbol(text.charAt(i), digitX, color);
    }
    pixels.show();
    delay(SCROLL_DELAY_MS);
  }
}

int wrapDial(int position, int rotations) {
  int wrapped = (position + rotations) % 100;
  if (wrapped < 0) wrapped += 100;
  return wrapped;
}

void setup() {
  Matrix_Init();
}
//const int rotations[] = {-68,-30,48,-5,60,-55,-1,-99,14,-82};
const int rotations[] ={-40,27,20,12,28,-9,31,45,-19,2,-25,-46,1,26,-44,-27,11,41,-11,14,33,-2,24,-8,-31,3,3,17,-14,-8,-16,44,-39,-7,2,-17,-2,33,50,-33,45,-33,-22,35,50,-24,47,-50,-49,14,13,10,45,96,4,29,-29,-34,-66,-59,-69,18,56,54,5,-20,92,-38,99,62,-87,20,41,-97,-77,-93,85,-92,82,-82,71,28,-94,-96,97,10,-16,-48,-52,92,-16,-44,-32,72,-10,38,-45,17,7,14,7,-69,-44,-87,87,-68,24,-67,95,-60,-65,-46,-603,272,-69,-93,-73,366,76,-75,515,-96,-214,-428,-55,327,5,10,16,19,176,-878,-24,59,75,-8,-720,30,-30,87,-37,70,96,4,-4,-23,27,268,64,-825,-49,942,24,-24,90,-63,-259,76,-60,86,-5,63,-928,-95,129,66,85,415,64,178,92,-64,78,52,30,76,-75,92,77,24,-38,14,396,-96,11,22,-270,89,148,-83,36,47,34,-34,-16,-8,-69,-66,28,-9,23,358,-41,-95,95,-672,-656,289,44,-5,707,93,-32,-43,88,-61,-52,6,585,38,-29,441,959,-42,708,51,-58,-59,-54,-61,-85,-47,-453,45,-64,57,-13,56,-81,41,-43,54,47,1,-43,943,90,-48,80,-70,37,-85,-403,-71,70,-667,856,-89,-31,21,-207,17,-27,-16,11,74,405,53,41,-59,-48,33,-8,-59,-55,-45,51,-15,-136,5,1,-18,-88,-41,19,-73,-25,20,-13,42,41,468,62,8,85,-41,-52,87,-87,-29,929,-12,22,25,58,-54,-72,733,612,-99,-1,86,43,28,-669,25,153,81,41,-19,-69,-12,40,171,-15,-73,-301,-22,-47,-68,32,-17,-89,89,-13,13,833,29,-36,-79,-751,-6,54,-54,17,993,49,51,-31,-69,-95,37,567,-53,-79,-77,70,832,46,13,-43,-823,4,-99,-358,29,-268,-71,660,81,-973,-92,-79,-62,-75,-92,-38,38,-79,-616,60,-65,-39,-19,-161,19,70,-70,-74,-34,-92,61,-61,19,99,82,-717,-8,31,511,-17,134,43,62,-28,89,10,-27,-42,-99,537,-179,-19,319,-87,36,-49,-97,25,999,-27,-509,-55,64,62,38,96,4,813,123,63,1,67,-457,-94,21,-76,-46,-432,-22,-5,-47,-46,-23,-44,-96,32,-32,-265,-868,233,-47,-53,-53,69,-16,-226,86,873,590,-80,11,10,-49,85,-172,32,1,-84,23,-12,-97,-90,-89,-12,95,30,-79,-756,88,-178,-23,-37,69,391,953,47,-29,-17,95,51,-41,21,-62,63,-89,633,18,-43,18,-12,-975,538,56,-35,6,64,46,-34,-126,344,-84,-93,-78,-488,-74,-907,34,-904,-85,-74,63,99,-99,261,45,94,-645,43,-50,-47,177,683,70,78,-9,-668,48,520,72,28,90,10,-76,76,11,77,-88,-31,-80,-781,-77,-7,17,59,-861,-11,72,99,4,-31,-86,-69,-17,-5,-995,-65,78,87,306,62,432,-57,-7,-836,-79,-21,-77,-923,-49,-85,25,-91,-66,-74,60,43,-70,-556,49,-58,52,20,-539,-61,-90,390,587,913,-10,46,910,-46,-84,84,-8,79,-71,83,-83,59,-24,833,-33,-35,375,9,-84,55,-62,-5,90,-52,-60,-23,96,46,9,6,85,-85,11,-15,-96,46,-63,-357,45,73,-73,-34,-37,-90,90,42,-89,-12,-411,-426,96,-867,-933,-36,-93,25,23,785,-4,84,16,293,-69,96,2,578,714,36,-350,2,15,-46,-71,-163,42,-479,10,150,39,-99,-88,511,-93,49,221,-17,192,25,-36,17,2,-78,-405,-73,39,-566,69,-82,242,35,-92,-35,63,-48,281,67,-20,14,6,-60,-59,-99,718,929,397,663,-1,-88,73,240,87,-50,65,-17,2,60,-60,-65,65,-68,68,34,-69,-701,36,7,12,2,-17,-60,493,710,-47,91,-491,1,-23,-50,72,91,78,16,-85,-67,-94,-56,-5,-83,553,52,90,-25,-88,-77,29,67,804,-433,-67,37,63,-953,-62,442,73,-28,728,-73,1,29,-48,193,98,-33,-22,11,54,-10,-82,-273,728,38,-11,10,-74,26,64,-548,5,56,226,66,-156,-68,93,547,-47,-610,71,25,-63,45,-219,51,-65,39,-74,-19,20,99,762,-13,55,-99,-5,23,45,732,-91,-9,-877,-23,-142,-558,33,67,866,-931,-890,355,-64,-60,-33,57,-77,16,-57,-24,86,56,70,-895,25,-69,469,95,5,-64,-60,24,-796,96,77,-13,204,-68,-73,-27,974,26,-45,87,-724,96,-36,22,7,-743,32,-515,419,-91,91,-17,75,-29,26,-69,51,40,-77,-29,-71,-704,52,-148,-65,48,-35,52,721,-663,6,-64,-5,85,73,-79,58,-29,89,-29,-463,-87,-13,51,15,84,850,95,5,-19,-36,-64,-10,29,889,-97,-1,9,11,322,-10,-19,-61,23,34,-25,60,60,64,-16,-843,26,-630,-579,30,-847,19,81,891,84,83,-58,-29,429,492,-92,56,-35,-28,7,61,-52,-309,6,632,-38,80,-76,96,-79,1,78,-24,-18,-458,-23,-173,87,-10,-581,618,982,48,52,65,27,-92,-33,-67,-23,-58,-19,-2,-45,-98,-24,69,-486,65,783,-662,-817,32,51,34,-57,-43,-229,729,-96,-34,-70,-39,39,9,91,-72,-28,43,-43,45,-33,-80,-33,-334,240,-192,-13,-60,60,64,-64,78,-215,54,-2,-50,-91,-174,50,14,-62,-2,-756,47,80,-90,90,-471,-81,76,-46,-16,-45,12,-21,-562,991,-15,51,56,55,45,-17,-47,49,-51,-15,-99,43,73,-27,33,98,66,-6,-37,-7,888,37,540,-34,51,-38,25,-91,-34,-910,-91,-96,56,-711,-48,-32,25,-76,29,19,-917,353,-186,31,-27,-99,36,-56,-481,658,-63,-14,-53,-62,92,-503,20,-994,206,-37,32,-27,-874,48,-51,22,661,-22,927,15,-47,-72,-381,-70,-11,98,-871,-79,-46,-93,23,-755,-42,-54,-16,-65,12,94,-68,543,-87,-76,-26,72,98,-122,-63,46,28,20,53,46,-89,487,-359,72,-89,-11,37,263,-11,58,53,45,-30,7,99,79,50,-44,-6,10,977,78,35,-57,75,-918,165,35,13,-717,87,-98,-60,-25,197,12,91,-36,-64,-64,-470,-866,-60,-12,72,65,17,-82,-41,45,-4,70,30,239,-39,89,-89,-41,41,-249,-41,51,-60,-47,51,-13,8,-20,-80,-245,919,929,97,517,-18,-899,701,-737,236,-89,-11,18,-92,-31,-655,33,84,-55,106,-8,9,91,38,8,-649,-55,-59,-98,-248,702,-39,-60,21,-90,-71,-73,43,-49,-19,80,18,43,-468,89,-94,730,74,54,34,-62,-2,-12,-88,2,-86,986,-72,-86,-44,-1,3,534,266,74,-60,13,-88,520,41,65,235,232,-32,-74,47,431,-4,-92,-8,-833,-67,49,88,-46,9,-67,22,53,-85,77,-95,-496,53,471,-717,-16,45,-45,-22,10,-57,69,21,79,63,-29,-34,50,99,-549,21,836,954,-3,292,-63,-37,32,968,-487,-91,144,-56,91,9,34,-41,97,39,361,-58,-264,25,87,-90,8,-973,-35,57,60,4,64,-85,39,-17,478,-484,-21,151,80,-26,10,-35,41,728,71,-15,-91,-9,78,39,31,82,70,-96,-4,63,-63,43,57,36,-24,96,52,99,-59,35,-87,13,-80,-49,-432,99,-430,72,-41,-40,-72,256,920,36,-99,-68,67,-51,-73,36,-12,-84,-16,32,43,-36,-77,87,851,90,-4,53,76,25,60,-904,11,95,68,23,407,-44,-56,-177,87,62,-91,474,-74,-81,-876,-22,36,-73,-74,9,-58,-42,-984,-16,-42,56,-14,64,-64,-96,-657,76,77,-20,-898,18,-96,96,-688,75,-93,-69,-27,68,-447,-19,637,-57,-37,57,8,-302,-23,562,-45,62,-94,-68,61,181,-58,77,1,2,11,69,-57,-77,-10,-37,-62,-25,21,3,51,-2,51,9,91,42,56,56,-63,99,92,464,-60,-137,-62,-87,638,-38,-92,45,-53,8,-8,52,-601,686,3,-40,85,26,-76,862,-37,-60,63,37,180,20,-53,53,-64,-53,17,71,81,35,313,32,71,-71,60,-92,-2,-98,-1,701,89,-59,70,-85,285,-81,-40,-79,22,28,-50,99,-499,90,10,85,-85,-30,30,-63,63,883,17,-50,-3,22,940,23,-32,-332,-72,49,-387,-258,267,-67,-82,-92,-96,-42,-14,654,-82,-42,-666,-157,75,87,-8,41,42,-34,24,30,-38,19,-54,-539,747,-73,440,-97,-143,81,19,514,-14,-99,899,50,-371,-79,14,-14,-125,-575,-71,71,63,-972,-55,475,89,-25,368,57,-56,-44,-81,41,289,-89,40,-40,71,-11,28,84,-858,26,-143,43,-62,-38,-65,-127,99,-28,571,77,-25,41,57,-93,-607,960,-34,53,21,-82,-65,-953,24,11,45,79,-892,33,75,38,87,-82,823,-40,41,-442,92,84,80,44,24,43,-67,-44,44,59,-64,65,-66,-194,-821,26,66,29,43,-343,35,-535,-91,833,59,75,24,79,-78,88,511,24,-24,-74,-29,-97,7,893,22,-49,39,-11,62,-95,-646,43,-83,-635,-65,-985,72,-24,37,29,-933,-67,-63,52,84,416,94,-91,-3,919,956,-75,-16,-84,-37,937,53,-11,-6,-36,-84,95,-895,-16,-806,51,-878,94,39,-9,-856,48,-87,-60,-57,-79,70,-70,638,-138,-947,-58,19,3,883,58,-4,346,563,68,60,-54,763,-20,55,-35,-93,93,27,-227,77,23,41,-229,42,-54,1,17,67,-75,90,-2,2,-6,-72,-22,43,57,-9,89,-97,617,78,739,83,76,24,66,-19,53,32,-96,-92,67,-890,33,-54,-76,-24,-66,66,7,-46,10,-33,551,-589,-98,98,-67,87,123,57,-938,53,803,-71,-12,16,44,-586,85,-87,-51,-91,-741,605,-702,-41,-86,-74,-26,203,-103,35,-821,-14,-95,-55,-446,-760,12,-56,43,178,-19,-92,28,53,86,-84,68,-374,80,33,-45,907,463,29,46,59,-59,38,-238,27,43,30,29,-29,-32,-66,22,776,586,-32,46,-970,-76,-55,-77,-18,844,52,-20,-80,325,14,761,-25,25,-89,89,24,-988,27,37,-999,99,-87,17,-94,464,7,93,99,1,-92,-594,53,-186,86,150,49,734,827,15,-42,84,-84,74,35,56,-89,-24,48,98,-80,-7,-73,-76,38,938,71,58,33,-303,-90,907,90,36,-28,-63,-32,659,77,47,-738,-31,557,-88,72,-72,-66,-39,5,64,-223,-16,-562,73,64,-51,-75,-15,-7,-82,-50,80,-770,85,-47,687,-587,87,54,-9,-95,88,-93,-574,74,756,-82,26,40,-49,-19,27,-2,-97,14,274,12,19,-48,751,419,-41,-64,64,-7,228,-11,90,-405,99,92,-31,-55,-694,632,-638,666,34,-23,-77,-60,98,-72,-21,14,-59,-61,-42,31,72,8,-63,-12,92,-25,-81,-19,-802,-54,-80,31,-33,17,-74,-6,16,-16,-36,-63,290,-671,-19,-21,-3,-48,-56,409,-854,-27,90,-90,50,-25,37,38,40,82,12,66,-42,-58,-82,82,120,-19,-897,596,21,-11,-7,-603,98,-61,-919,-43,66,-41,44,-33,942,647,766,-32,66,-18,-103,-61,82,-32,-371,-97,126,832,484,98,60,95,-894,-36,89,46,-32,-68,-84,-76,-440,78,22,81,-34,347,455,51,247,53,-4,498,-94,83,80,133,-51,-45,-73,85,-912,34,753,49,64,492,-92,95,85,27,-7,56,-56,-30,-74,77,80,233,11,-60,67,658,-53,-124,15,-30,972,-35,-3,25,-93,64,-14,48,-70,-47,-17,-397,60,-15,50,33,65,-206,402,-8,-41,722,-65,-48,-6,-46,74,26,3,-37,15,19,51,-25,-72,-555,-44,-84,-440,10,18,52,-75,29,42,-24,96,-79,-2,37,-349,-86,336,-36,-44,44,-423,-87,23,-13,97,-81,-16,27,-58,-87,-45,-37,80,20,75,-23,-52,919,-881,-38,-13,9,65,-61,-76,-80,-971,61,251,15,345,755,10,48,-458,90,38,-28,44,95,-4,-78,229,60,54,-45,71,-84,6,-62,9,74,-69,-528,-35,-7,-2,72,-13,-287,8,31,61,-669,-76,-55,-910,21,-11,82,32,64,-378,48,-648,-16,-92,-5,-78,-49,40,-4,4,276,86,20,56,-44,-344,20,72,758,97,448,55,-37,-16,-12,-61,26,-8,10,698,-43,-3,77,-31,39,61,-340,-47,7,94,19,-81,715,10,69,605,-520,-94,-35,-50,664,-701,-45,-40,-46,460,502,57,-97,-93,76,59,-82,34,39,-492,45,173,1,-866,64,-25,-39,-9,30,-78,29,-72,-27,91,136,15,85,859,-448,-12,32,69,-94,93,701,-62,62,-10,-12,64,58,-664,7,-43,81,-53,93,1,-57,-64,99,470,-961,-15,-94,-656,29,-73,-3,403,-86,86,-47,47,76,55,-13,-18,-71,-329,407,893,-114,-86,-99,-40,63,-24,-49,24,-773,-2,69,3,828,49,-162,-87,-20,-61,69,-88,57,83,-140,663,718,-70,-11,414,-814,-35,-65,-94,30,-72,35,-61,-38,-242,64,835,-72,15,5,70,793,-4,-493,-84,-87,995,868,-63,-89,5,-16,50,-50,17,17,78,-12,92,8,-40,-260,-47,361,7,79,87,89,-95,-881,-68,42,-74,-35,482,-47,37,63,-1,-99,341,-810,69,-5,-913,-70,-24,12,-80,-20,44,-44,98,-64,-20,-75,-39,36,-36,56,-309,-45,98,-889,89,11,-11,-36,315,-79,13,-13,55,71,33,-59,36,-36,-45,45,614,55,-86,46,62,-52,65,96,17,-221,26,-31,-47,87,22,304,18,905,-45,65,90,96,-73,-713,-93,93,27,73,60,-83,-77,71,67,-338,-76,-24,-372,-516,-77,17,-50,325,-55,92,236,-68,10,58,-94,-706,-884,84,-21,79,84,-54,806,406,369,-69,73,27,754,341,75,-370,-34,61,73,35,65,22,66,-88,-699,-21,27,-82,62,13,63,66,-19,-10,-30,-270,-30,36,731,-37,71,729,-25,69,55,1,90,-148,-17,654,67,54,1,99,79,-58,16,63,-50,28,12,-32,-309,108,41,6,52,17,-173,-25,136,589,82,66,7,135,-97,-793,-72,772,-3,-415,18,-997,56,39,-87,-11,-80,480,-11,2,-91,352,-4,-27,-42,221,94,-17,23,87,-887,-44,-6,-50,-83,69,959,55,79,899,22,-438,-62,46,34,1,-93,356,402,-35,495,-65,93,82,740,95,-51,-31,-2,-21,209,-64,-27,-64,94,-793,-7,24,17,-254,-81,-77,99,-36,-86,663,29,-92,-79,-56,-31,66,21,-455,741,93,56,54,541,-43,22,70,-623,41,-46,59,79,-43,-67,587,66,-33,-91,-34,-61,27,-48,287,-48,75,13,25,-65,-98,92,-794,38,8,54,472,27,15,87,-41,-60,42,-504,41,64,14,40,77,926,-19,219,77,23,-74,-57,-171,-39,68,-60,74,-5,-36,41,3,-44,55,45,-82,-55,37,-718,30,-12,18,88,-34,29,99,-27,-47,-61,-62,597,-36,36,45,-40,-27,-14,65,-54,-15,40,33,-76,-89,-44,-24,-55,20,-241,44,37,-81,-801,-485,-62,24,-5,-49,793,585,-24,46,301,189,65,85,34,980,57,-48,72,-39,-69,73,-846,-84,-516,-83,4,79,23,77,15,-99,-90,38,41,-5,-89,-340,-270,-72,71,-90,11,-47,-74,812,45,-57,35,-864,-66,313,204,56,-78,29,435,-64,34,-34,-78,58,-80,-679,-14,93,290,-90,7,93,2,298,-17,-169,36,750,38,407,76,7,-807,-512,79,-25,37,206,74,-80,590,-5,21,99,-20,78,-45,-44,58,70,98,-56,17,-61,961,-56,711,-76,60,91,4,-43,-30,65,74,46,-25,-493,-89,85,15,-56,656,47,-67,48,1,243,28,-34,-266,760,840,27,73,-87,47,40,-451,-34,46,63,-50,-39,-69,-66,51,79,46,-76,-66,-46,92,80,40,70,214,-84,41,-41,675,-30,-29,497,55,-72,86,-42,97,-37,60,91,-66,-17,169,663,14,-17,-97,-45,-57,30,58,14,-821,-90,-471,-63,-70,-85,65,51,84,82,-41,605,13,41,-6,-2,8,8,92,10,537,-527,763,823,-44,196,69,-321,-6,180,-71,-739,-70,662,75,6,96,-23,-16,687,-23,436,-578,-90,-24,592,681,19,-17,-82,-92,91,-660,77,-99,-58,-60,88,58,-84,779,59,42,35,923,10,-591,709,-2,-43,-83,-51,-56,46,661,58,12,-370,33,404,85,467,8,3,443,-41,739,-55,-85,-66,-57,-59,-86,67,-93,93,-72,472,-76,23,-80,396,-71,8,-173,-746,-88,-24,54,31,-53,-30,-71,-85,-215,-72,-3,-46,91,-95,-775,30,592,77,12,-11,-579,237,-58,10,-29,-7,26,41,-884,-57,95,-92,66,43,88,52,-34,9,-22,-305,-812,636,76,-864,-722,-75,-39,811,594,4,-86,-70,-42,89,-89,-164,-47,270,-28,53,753,-415,604,2,-39,-6,6,278,-67,58,54,1,9,-899,29,70,-18,-57,-46,88,67,9,-72,47,-51,-882,56,-74,668,-332,-83,52,-36,-69,-99,99,47,-47,-153,-247,-38,62,66,58,-38,90,64,-30,85,84,35,-78,-50,90,78,-242,-1,59,6,71,-79,-439,-53,-92,-908,-77,77,226,313,-349,78,-41,-27,877,-77,471,-78,22,760,-75,88,-58,-22,-742,-966,-89,89,85,-55,370,32,-32,25,75,42,-77,35,846,-46,937,8,932,56,-297,-33,-81,-18,-30,-84,467,-57,53,347,-75,75,-9,-22,-69,-74,74,223,-23,9,152,31,-172,-87,-33,-13,88,566,-29,-12,-372,-43,15,133,-69,-64,49,-59,831,-721,12,-42,-59,-790,479,76,-771,-11,-801,37,91,-68,-376,11,11,1,88,85,27,-94,-6,-31,64,-482,21,-338,-34,122,-2,-97,77,-634,-4,10,-5,-61,-53,857,-10,-39,-861,92,8,81,-28,-53,-94,-6,966,80,-17,35,52,-66,50,17,83,299,-32,-427,-576,436,-36,36,37,258,-15,835,21,-13,777,-16,-84,45,-45,-53,29,-76,13,9,-724,2,45,-887,-58,-658,58,-401,49,-465,-355,91,-19,-75,41,-76,259,-249,-731,31,127,-2,9,-34,69,76,771,-916,3,27,68,49,-64,62,-45,-55,71,86,-2,-53,-46,30,669,-65,965,84,-66,82,-4,-36,-360,-42,82,46,-31,940,-95,-594,40,-543,-67,5,8,76,74,-92,27,66,-7,-374,38,43,-23,-440,-37,-81,28,-16,-31,41,-41,-15,-81,-25,54,80,-42,29,-94,64,13,-83,-67,-5,84,3,85,-39,-26,87,46,32,6,-6,-72,5,-46,93,20,70,-9,4,14,-69,-12,72,30,651,-10,-96,19,-11,-39,-14,41,59,513,-13,-6,-86,-11,-16,53,46,81,-886,61,34,-34,-36,-61,61,-20,-780,-92,30,17,-55,94,-131,37,-6,6,47,53,963,732,5,-6,-86,21,60,-97,-62,-85,-45,-81,-19,221,14,79,32,-46,-34,13,24,54,-28,71,67,-57,-65,555,20,80,-4,204,93,-315,-378,98,26,76,837,63,-92,92,57,25,18,-421,-10,731,46,653,-99,97,75,-55,-17,-42,-16,-3,61,-28,301,71,89,-92,-57,16,-703,-13,-81,97,-71,71,-33,-96,20,-40,48,-70,-718,-98,787,35,431,34,27,68,40,68,-73,-30,980,-80,-97,-95,-976,-528,96,97,32,72,99,804,96,-72,-60,32,110,-46,-77,213,-787,-30,-814,64,62,5,-61,-639,-82,34,12,-90,22,-696,-20,-80,-20,20,67,633,-96,96,661,-811,-97,521,26,-78,-804,882,-26,41,-15,-25,-45,-95,64,-1,-80,-18,-35,-721,78,-69,-898,566,-5,784,-14,-86,-184,82,202,-1,1,-541,68,-27,-73,-27,31,-22,9,323,-541,-86,-1,-683,26,-56,93,98,24,685,-38,-25,-404,-233,-984,-21,96,40,25,-12,56,77,79,75,-34,3,-943,92,-83,-644,-622,12,549,-61,-85,-24,588,-11,29,-47,14,65,71,579,-34,-62,215,-21,-27,-494,21,-81,35,-659,-72,14,-13,44,-45,1,-1,96,71,83,32,511,-119,35,-8,-1,-928,-743,71,-24,93,-869,95,63,742,-80,-20,51,75,-26,921,24,-64,19,74,-19,-55,94,-202,8,937,-818,-20,-25,22,-6,-90,-81,-3,-16,-24,905,-8,4,561,762,-334,84,50,3,44,86,50,-47,77,-37,-876,-476,-627,40,63,-92,-8,-42,5,-63,97,56,-53,47,85,31,-10,47,987,13,94,98,537,63,98,10,44,130,19,-93,-91,-62,7,-54,-41,23,18,47,-36,56,433,-20,-80,-215,-85,954,20,-171,-3,-351,-86,-22,-50,-71,80,-60,47,-66,-73,352,37,-43,-84,-980,-701,-29,-287,-69,51,31,81,-16,66,-57,252,-71,-81,29,-99,81,89,-31,92,52,-57,44,-92,50,-558,7,-507,-38,4,-452,582,-3,22,33,52,48,74,-44,71,54,66,-34,7,58,55,41,96,8,-64,-36,44,-75,-67,16,9,-27,65,-65,67,-67,-98,-154,93,986,573,27,-27,-88,-28,16,-911,-60,-29,-732,423,-485,94,-81,-19,-3,858,58,-113,-32,11,-34,17,-14,31,33,-172,-95,-1,56,-60,80,-720,-683,80,3,-75,84,76,91,-38,-3,-46,-76,7,-65,-55,77,22,-50,-56,-21,-25,53,-11,-89,-96,-64,60,-969,19,-99,25,23,1,-56,356,-40,40,905,-807,-197,93,-16,-96,949,-763,-68,203,-57,54,847,-69,22,13,-29,-84,-37,38,15,-75,-50,-91,-40,480,-74,-85,-43,-49,363,424,99,-75,-48,447,1,34,42,28,-66,662,38,74,82,67,-64,-6,-81,-59,-51,-427,-56,-117,-1,-39,-82,22,-936,-68,-96,-2,16,98,-173,-972,-5,38,-48,-9,14,-20,721,16,-19,45,-63,-894,54,80,23,76,33,29,-38,742,-35,255,-88,-974,-56,-7,13,67,3,80,-547,59,895,-7,967,-78,911,23,28,49,14,77,59,-64,414,997,3,67,-67,31,-15,74,10,70,-70,266,23,-9,69,51,-84,-78,15,90,-479,21,-42,-58,150,865,-25,502,-17,-81,68,53,-550,578,61,363,-99,-77,-62,-14,-64,17,47,63,-63,21,-421,-49,49,96,-31,-65,46,-622,11,65,-54,-45,-1,35,65,-37,-63,-80,-29,9,-78,-22,-83,76,-827,-57,-963,54,7,-95,-62,99,51,-39,362,98,-65,-58,-98,-560,64,79,-792,8,1,-50,82,-73,-88,-71,44,2,-90,-8,47,73,-271,3,44,206,-2,-65,343,-26,110,-52,15,64,-78,441,24,32,63,81,-341,48,93,67,46,75,-15,-26,53,-27,-42,58,66,-155,-64,79,66,87,38,-93,-997,-99,82,-1,602,43,73,-20,4,-12,-42,-86,-1,-69,-245,634,-13,85,49,-52,-30,-18,-21,-18,-657,-404,-74,-226,55,945,-70,-30,84,786,-70,309,96,-867,3,4,31,56,-27,93,40,-238,-955,44,80,701,-37,-33,-88,88,-15,61,-46,-54,-46,15,72,-87,-15,15,241,-15,39,-78,240,-48,-758,-521,56,-79,-18,41,-18,-782,-95,90,91,-86,-49,49,-4,57,47,733,67,-824,24,94,-968,74,-79,-21,43,-43,-264,364,2,998,-6,-99,-281,86,-45,662,459,-32,-44,-13,-87,94,-64,-11,-19,18,69,20,45,10,-94,41,-409,13,87,65,-78,-87,-80,-86,-87,33,74,-54,95,5,-46,-88,-2,48,13,12,63,-25,85,41,99,-26,-27,53,-77,-16,-7,-71,-29,-59,-91,-50,-42,-82,24,-61,13,-36,70,-66,-40,20,78,22,-68,-73,59,-56,-22,-2,30,15,19,-35,30,42,-38,-13,-43,43,12,26,27,34,-29,-25,26,49,37,42,35,-15,39,36,-48,20,29,43,22,-39,-42,50,9,-44,43,37,-7,-46,-15,-29,6,19,-14,-19,-47,37,-18,29};

void loop() {
  static int password = 0;
  static int pointing = 50;
  for (int i = 0; i < sizeof(rotations)/sizeof(rotations[0]); i++) {
    pointing = wrapDial(pointing, rotations[i]);
    if (pointing == 0) {
      password++;
      if (password<=250) displayNumber(pointing, GREEN); else displayStar(); 
      if (password <= 5) delay(400);  
    } else {
      if (password<=250) displayNumber(pointing, AMBER); else displayStar();
    }
   if (password <= 5) delay(250);
  }

  /*
  static int pointing = 5;
  displayNumber(pointing);
  delay(500);
  const int rotation = -10; // change to -1 to count left by 1click
  pointing = wrapDial(pointing, rotation); // handles 99->0 and 0->99
  displayNumber(pointing);
  */
   while (true) { 
    delay(1000);
      displayNumber(password, RED);
  }
}
